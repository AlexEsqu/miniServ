# runs the process as a user instead of root for security
user					nginx;

# since this is a simple project I only need one worker
worker_processes		1;

# I expect maximum 1024 simultaneous connections (prove me wrong ? make me go viral ?)
events {
	worker_connections	1024;
}

http {

	# automatically match files with their extension, so <file>.html is assigned content type text/html
	include				mime.types;

	server {
		# listening for incoming comms
		listen						8080;
		server_name					localhost;

		# kill cache
		add_header					Last-Modified	$date_gmt;
		add_header					'Cache-Control'	'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';		if_modified_since			off;
		expires						off;
		etag						off;

		# setting up root directory from which to seek php files
		root						/var/www/html;

		# setting up default file for homepage
		index						index.html;


		# Handle .py files with CGI
		location ~ \.py$ {
			# Enable CGI for Python files
			fastcgi_pass			unix:/var/run/fcgiwrap.socket;
			include					/etc/nginx/fastcgi_params;

			# Important: Set the script filename correctly
			fastcgi_param SCRIPT_FILENAME	$document_root$fastcgi_script_name;
			fastcgi_param REQUEST_METHOD	$request_method;
			fastcgi_param CONTENT_TYPE		$content_type;
			fastcgi_param CONTENT_LENGTH	$content_length;
		}

	}
}
